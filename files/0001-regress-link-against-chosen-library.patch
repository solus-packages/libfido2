From 11a69005edc33dee6338b4ee47d102f1f564a6f2 Mon Sep 17 00:00:00 2001
From: Silke Hofstra <silke@slxh.eu>
Date: Fri, 6 May 2022 15:36:02 +0200
Subject: [PATCH 1/2] regress: link against chosen library

Compile `regress` against `${_FIDO2_LIBRARY}` so it links against
the shared library when building with `BUILD_STATIC_LIBS=OFF`.
---
 regress/CMakeLists.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/regress/CMakeLists.txt b/regress/CMakeLists.txt
index 87482ef..77b7c51 100644
--- a/regress/CMakeLists.txt
+++ b/regress/CMakeLists.txt
@@ -6,7 +6,7 @@ add_custom_target(regress)
 
 macro(add_regress_test NAME SOURCES)
 	add_executable(${NAME} ${SOURCES})
-	target_link_libraries(${NAME} fido2)
+	target_link_libraries(${NAME} ${_FIDO2_LIBRARY})
 	add_test(${NAME} ${NAME})
 	add_dependencies(regress ${NAME})
 endmacro()
-- 
2.35.3

